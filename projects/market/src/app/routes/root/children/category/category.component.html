<market-category-list
  [category]="category"
></market-category-list>

<market-search-area
  [filters]="filters"
  [query]="query"
  [enableSuggestions]="true"
  [areAdditionalFiltersEnabled]="areAdditionalFiltersEnabled"
  [filterCollapsed]="isFilterCollapsed"
  (submitClick)="navigateInCategoryRoute($event)"
>
  <ng-container ngProjectAs="upper-slot" *ngIf="bannerItems?.length">
    <market-banners [bannerItems]="bannerItems"></market-banners>
  </ng-container>

  <ng-container ngProjectAs="main-slot">
    <market-main-popular
      *ngIf="isNotSearchUsed && isPopularProductsShown"
      [categoryId]="category?.id"
    ></market-main-popular>

    <market-search-results
      [productOffers]="productOffers"
      [productsTotal]="productsTotal"
      [category]="category"
      [page]="page"
      [sort]="sort"
      [scrollPosition]="scrollPosition"
      [visibleSort]="productOffers?.length > 1"
      (pageChanged)="loadProducts($event)"
      (sortingChanged)="changeSortingAndRefresh($event)"
    >

      <ng-container ngProjectAs="tags-slot" *ngIf="showTags">
        <market-tag (click)="resetUrlFilters()">
          Сбросить все фильтры
        </market-tag>
      </ng-container>
    </market-search-results>

  </ng-container>

</market-search-area>
